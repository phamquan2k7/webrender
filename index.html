<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>AhzzThww | Giới Thiệu & Biểu Đồ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    margin: 0; padding: 0;
    background-color: black; /* Đổi tạm background đen cho hiệu ứng glitch */
    color: #00ff00;
    font-family: 'Press Start 2P', monospace;
    overflow: hidden;
  }

  /* GLITCH INTRO */
  #wrapper {
    position: relative;
    width: 100vw;
    height: 100vh;
    background: black;
  }

  #intro {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: transform 1s ease, opacity 1s ease;
    z-index: 10;
  }

  #textContainer {
    display: flex;
    justify-content: center;
    font-size: 40px;
    user-select: none;
  }

  .char {
    position: relative;
    margin: 0 3px;
    cursor: default;
    user-select: none;
    display: flex;
    flex-direction: column;
    height: 60px;
    overflow: hidden;
  }

  .slice {
    flex: 1;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #00ff00;
    text-shadow: 0 0 2px #00ff00;
  }

  .slice.top    { height: 20px; }
  .slice.middle { height: 20px; }
  .slice.bottom { height: 20px; }

  @keyframes glitchTop {
    0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); filter: none; }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-20px); filter: drop-shadow(-2px 0 #00ff00) drop-shadow(2px 0 #00ff00); }
  }
  @keyframes glitchMiddle {
    0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); opacity: 1; }
    10%, 30%, 50%, 70%, 90% { transform: translateX(20px); opacity: 0; }
  }
  @keyframes glitchBottom {
    0%, 20%, 40%, 60%, 80%, 100% { transform: translateX(0); opacity: 1; }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-20px); opacity: 0; }
  }

  .glitch-top    { animation: glitchTop 0.8s linear 0s 5 forwards; }
  .glitch-middle { animation: glitchMiddle 0.8s linear 0s 5 forwards; }
  .glitch-bottom { animation: glitchBottom 0.8s linear 0s 5 forwards; }

  #finalText {
    font-size: 40px;
    margin-top: 10px;
    display: none;
    user-select: none;
  }

  #yesBtn {
    margin-top: 40px;
    background: transparent;
    color: #00ff00;
    border: 2px solid #00ff00;
    padding: 10px 30px;
    font-size: 16px;
    cursor: pointer;
    display: none;
    user-select: none;
  }

  #mainContent {
    position: absolute;
    top: 100vh;
    width: 100%;
    padding: 50px 20px;
    text-align: center;
    font-size: 20px;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #0f0f1a;
    transition: transform 1s ease, opacity 1s ease;
    z-index: 1;
    overflow-y: auto;
    height: 100vh;
  }

  #mainContent.active {
    transform: translateY(-100vh);
    opacity: 1;
  }

  #intro.hide {
    transform: translateY(-100vh);
    opacity: 0;
  }


  /* --- Phần còn lại giữ nguyên style ban đầu của bạn --- */

  .main-header {
    text-align: center;
    margin-top: 40px;
    margin-bottom: 60px;
  }

  .main-header h1 {
    font-size: 60px;
    font-weight: 700;
    letter-spacing: 4px;
    color: #f2f2f2;
    text-shadow: 2px 2px 6px rgba(255,255,255,0.1);
    font-family: 'Orbitron', sans-serif;
  }

  .intro-section {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    background: linear-gradient(to right, #1a1a2e, #111122);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,255,255,0.15);
    gap: 30px;
    color: #e0e0e0;
    font-size: 16px;
    margin: 0 40px 60px;
  }

  .intro-left,
  .intro-right,
  .intro-center {
    flex: 1;
  }

  .intro-left,
  .intro-right {
    max-width: 300px;
  }

  .intro-left p,
  .intro-right p {
    line-height: 1.6;
  }

  .data-section {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 40px;
    margin: 0 40px 80px;
  }

  .data-table {
    flex: 1;
    max-width: 50%;
  }

  .data-chart {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 50%;
    padding-top: 20px;
  }

  /* Bảng style hologram/neon nhẹ */
  table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(145deg, #1f1f2f, #141420);
    color: #f2f2f2;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0,255,255,0.05);
    backdrop-filter: blur(4px);
  }

  th, td {
    padding: 16px;
    text-align: left;
    border-bottom: 1px solid #333;
  }

  th {
    background: linear-gradient(to right, #2e2e4d, #1e1e30);
    color: #00ffff;
    text-shadow: 0 0 4px rgba(0,255,255,0.4);
    text-transform: uppercase;
    font-weight: 600;
  }

  tr:hover {
    background-color: rgba(0,255,255,0.05);
    transition: background 0.2s ease-in-out;
  }

  tfoot tr td {
    border-top: 2px solid #00ffff;
    font-weight: 700;
    font-size: 18px;
    color: #0ff;
    background: linear-gradient(145deg, #111122, #1f1f2f);
  }
</style>
</head>
<body>
  <div id="wrapper">
    <!-- INTRO GLITCH -->
    <div id="intro">
      <div id="textContainer"></div>
      <div id="finalText">ARE YOU READY?</div>
      <button id="yesBtn">YES</button>
    </div>

    <!-- MAIN CONTENT -->
    <div id="mainContent" style="opacity:0;">
      <header class="main-header">
        <h1>AhzzThww</h1>
      </header>

      <section class="intro-section">
        <div class="intro-left">
          <p>
            Bóng tối không phải để che giấu, mà để bảo vệ. Im lặng không phải sự vắng mặt, mà là lời thừa nhận duy nhất. Mọi câu hỏi vô nghĩa khi lời đáp nằm ngoài phạm vi hiểu biết. Sự thật nằm khuất sau lớp màn, chỉ dành cho kẻ đủ can đảm nhìn thẳng vào. Đừng cố tìm kiếm ánh sáng khi bóng tối mới là nơi quyền lực thật sự tồn tại.<br />
          </p>
        </div>
        <div class="intro-center"></div>
        <div class="intro-right">
          <p>T không cần chứng minh gì cả. Im lặng là lựa chọn, không phải yếu đuối. Đụng tới t, m sẽ hiểu - cái giá của việc đánh thức thứ nên để yên</p>
        </div>
      </section>

      <section class="data-section">
        <div class="data-table">
          <table id="scoreTable">
            <thead>
              <tr>
                <th>Tên</th>
                <th>Điểm</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>ChelimaeGies</td> <td>126</td></tr>
              <tr><td>nhimslatte</td><td>72</td></tr>
              <tr><td>Albiceleste<img src="https://hoidap247.com/static/img/icon_mod.png" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>72</td></tr>
              <tr><td>DYNAMONSWORLD <img src="https://hoidap247.com/static/img/icon_mod.png" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>67</td></tr>
              <tr><td>tedious</td><td>63</td></tr>
              <tr><td>Channnnnnnnnnnnnnnnnnnnnnnnnn</td><td>56</td></tr>
              <tr><td>NguyenTuan0667</td><td>55</td></tr>
              <tr><td>hoanghuy9165</td><td>54</td></tr>
              <tr><td>dotuelinh13</td><td>53</td></tr>
              <tr><td>huonggiangk9</td><td>53</td></tr>
              <tr><td>minhnguyetntt</td><td>44</td></tr>
              <tr><td>Riley247</td><td>43</td></tr>
              <tr><td>dtkc0304</td><td>27</td></tr>
              <tr><td>meomonn</td><td>25</td></tr>
              <tr><td>tranhuuan20122015</td><td>25</td></tr> 
              <tr><td>EnderAlpha</td><td>23</td></tr>
              <tr><td>nguyenthimailanhd</td><td>22</td></tr>
              <tr><td>AccPayMau</td><td>21</td></tr>
              <tr><td>diyComeback</td><td>20</td></tr>
              <tr><td>xyking</td><td>17</td></tr>
              <tr><td>haifanconan</td><td>17</td></tr>
              <tr><td>TheWish214</td><td>16</td></tr>
              <tr><td>Mahiru216</td><td>16</td></tr>
              <tr><td>phuongla56993<img src="https://hoidap247.com/static/img/icon_bdhh.png?v1" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>13</td></tr>
              <tr><td>ebeengoanne</td><td>13</td></tr>
              <tr><td>sweetly05</td><td>10</td></tr>
              <tr><td>Changtrailofi<img src="https://hoidap247.com/static/img/icon_mod.png" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>10</td></tr>
              <tr><td>ZeenNoPro</td><td>6</td></tr>
              <tr><td>etanlra</td><td>6</td></tr>
              <tr><td>forgive</td><td>5</td></tr>
              <tr><td>baobui4</td><td>5</td></tr>
              <tr><td>TanDat2k8<img src="https://hoidap247.com/static/img/icon_bdhh.png?v1" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>4</td></tr>
              <tr><td>sonphung411</td><td>4</td></tr>
              <tr><td>nguyentrungnguyen5</td><td>3</td></tr>
              <tr><td>phamlethaian23012016</td><td>3</td></tr>
              <tr><td>minhduc8909</td><td>3</td></tr>
              <tr><td>lamcao31439<img src="https://hoidap247.com/static/img/icon_bdhh.png?v1" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>2</td></tr>
              <tr><td>chantraithugian</td><td>2</td></tr>
              <tr><td>LiliWave</td><td>2</td></tr>
              <tr><td>quynhnguyenvoxuan</td><td>2</td></tr>
              <tr><td>linhproksa<img src="https://hoidap247.com/static/img/icon_bdhh.png?v1" alt="mod" style="height: 16px; vertical-align: middle; margin-left: 4px;"></td><td>1</td></tr>
              <tr><td>07th04</td><td>1</td></tr>
              <tr><td>Nguyenthuthuy10</td><td>1</td></tr>
              <tr><td>StarBby1123</td><td>1</td></tr>
              <tr><td>Đoàn Kết</td><td>600</td></tr>
              <tr><td>Đại Đoàn Kết</td><td>200</td></tr>
              <!-- M có thể thêm bao nhiêu dòng tùy thích -->
            </tbody>
            <tfoot>
              <tr>
                <td>Tổng điểm</td>
                <td id="totalScore">0</td>
              </tr>
            </tfoot>
          </table>
        </div>

        <div class="data-chart">
          <canvas id="myPieChart" width="220" height="220"></canvas>
        </div>
      </section>
    </div>
  </div>

<script>
  // GLITCH effect setup
  const text = "ARE YOU READY?";
  const container = document.getElementById("textContainer");
  const finalText = document.getElementById("finalText");
  const yesBtn = document.getElementById("yesBtn");
  const mainContent = document.getElementById("mainContent");
  const intro = document.getElementById("intro");

  [...text].forEach(char => {
    const charDiv = document.createElement("div");
    charDiv.classList.add("char");

    const topSlice = document.createElement("div");
    topSlice.classList.add("slice", "top");
    topSlice.textContent = char === ' ' ? '\u00A0' : char;

    const middleSlice = document.createElement("div");
    middleSlice.classList.add("slice", "middle");
    middleSlice.textContent = char === ' ' ? '\u00A0' : char;

    const bottomSlice = document.createElement("div");
    bottomSlice.classList.add("slice", "bottom");
    bottomSlice.textContent = char === ' ' ? '\u00A0' : char;

    charDiv.appendChild(topSlice);
    charDiv.appendChild(middleSlice);
    charDiv.appendChild(bottomSlice);

    container.appendChild(charDiv);
  });

  const glitchTopElems = document.querySelectorAll('.slice.top');
  const glitchMiddleElems = document.querySelectorAll('.slice.middle');
  const glitchBottomElems = document.querySelectorAll('.slice.bottom');

  let glitchCount = 0;
  const glitchMax = 1;

  function runGlitch() {
    glitchTopElems.forEach(el => el.classList.add('glitch-top'));
    glitchMiddleElems.forEach(el => el.classList.add('glitch-middle'));
    glitchBottomElems.forEach(el => el.classList.add('glitch-bottom'));

    setTimeout(() => {
      glitchTopElems.forEach(el => {
        el.classList.remove('glitch-top');
        el.style.transform = 'none';
        el.style.opacity = '1';
        el.style.filter = 'none';
      });
      glitchMiddleElems.forEach(el => {
        el.classList.remove('glitch-middle');
        el.style.transform = 'none';
        el.style.opacity = '1';
      });
      glitchBottomElems.forEach(el => {
        el.classList.remove('glitch-bottom');
        el.style.transform = 'none';
        el.style.opacity = '1';
      });

      glitchCount++;
      if (glitchCount < glitchMax) {
        setTimeout(runGlitch, 50);
      } else {
        container.style.display = "none";
        finalText.style.display = "block";
        yesBtn.style.display = "inline-block";
      }
    }, 800);
  }

  runGlitch();

  yesBtn.addEventListener("click", () => {
    intro.classList.add("hide");
    mainContent.classList.add("active");
    mainContent.style.opacity = '1';
    // Cho phép scroll khi vào main content
    document.body.style.overflow = "auto";
  });

  // --- Phần biểu đồ giữ nguyên từ bạn ---

  // Hàm tạo màu HSL phân bố đều theo số phần tử
  function generateColors(count) {
    const colors = [];
    for (let i = 0; i < count; i++) {
      const hue = Math.round((360 * i) / count);
      const color = `hsl(${hue}, 70%, 60%)`;
      colors.push(color);
    }
    return colors;
  }

  function updateTotalAndChart() {
    const table = document.getElementById('scoreTable');
    const tbody = table.tBodies[0];
    const totalCell = document.getElementById('totalScore');

    let names = [];
    let values = [];
    let total = 0;

    for(let row of tbody.rows){
      let name = row.cells[0].textContent.trim();
      let val = parseFloat(row.cells[1].textContent);
      if(name && !isNaN(val)){
        names.push(name);
        values.push(val);
        total += val;
      }
    }

    totalCell.textContent = total;

    // Tính phần trăm
    const percentData = values.map(v => (v / total) * 100);

    // Tạo màu tự động
    const colorsBG = generateColors(names.length);
    // Tạo màu border (tăng độ sáng)
    const colorsBorder = colorsBG.map(c => {
      // Chuyển HSL -> HSL sáng hơn 20%
      // Cách đơn giản: tăng Lightness (có thể parse)
      // Đơn giản để giữ code ngắn, đổi 60% -> 80%
      return c.replace(/(\d+)%\)$/, (match, p1) => {
        let light = Math.min(parseInt(p1) + 20, 90);
        return light + '%)';
      });
    });

    const data = {
      labels: names,
      datasets: [{
        data: percentData,
        backgroundColor: colorsBG,
        borderColor: colorsBorder,
        borderWidth: 2
      }]
    };

    const config = {
      type: 'pie',
      data: data,
      options: {
        plugins: {
          tooltip: {
            callbacks: {
              label: ctx => {
                const rawValue = values[ctx.dataIndex];
                const percent = ctx.raw.toFixed(1);
                return `${ctx.label}: ${rawValue} điểm (${percent}%)`;
              }
            }
          }
        }
      }
    };

    if(window.myChart) window.myChart.destroy();
    window.myChart = new Chart(document.getElementById('myPieChart'), config);
  }

  window.addEventListener('DOMContentLoaded', updateTotalAndChart);
</script>
</body>
</html>

